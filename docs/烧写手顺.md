# 烧写板子手顺

本文档介绍如何将编译好的程序烧写到开发板上。

## 准备工作

### 硬件准备

1. 开发板（如STM32F103、Arduino Uno等）
2. USB数据线或烧写器（如ST-Link、J-Link等）
3. 电脑（安装好驱动程序）

### 软件准备

1. 烧写工具（根据开发板选择）：
   - STM32: STM32CubeProgrammer 或 ST-Link Utility
   - Arduino: Arduino IDE
   - 通用: OpenOCD

2. 编译工具链：
   - ARM芯片: arm-none-eabi-gcc
   - AVR芯片: avr-gcc

## 烧写步骤

### 方法一：使用ST-Link烧写STM32

1. **连接硬件**
   ```
   ST-Link      STM32开发板
   -------      -----------
   SWDIO   <->  SWDIO
   SWCLK   <->  SWCLK
   GND     <->  GND
   3.3V    <->  VCC (可选)
   ```

2. **打开STM32CubeProgrammer**

3. **连接目标板**
   - 点击 "Connect" 按钮
   - 确认连接成功

4. **加载固件文件**
   - 点击 "Open file"
   - 选择编译生成的 `.hex` 或 `.bin` 文件

5. **开始烧写**
   - 点击 "Download" 按钮
   - 等待烧写完成

6. **验证烧写**
   - 点击 "Verify" 验证固件
   - 断开连接，重启开发板

### 方法二：使用Arduino IDE烧写

1. **打开Arduino IDE**

2. **选择开发板**
   - 菜单：工具 -> 开发板 -> 选择对应型号

3. **选择端口**
   - 菜单：工具 -> 端口 -> 选择对应COM口

4. **上传程序**
   - 点击 "上传" 按钮（右箭头图标）
   - 等待编译和上传完成

### 方法三：使用OpenOCD烧写

1. **安装OpenOCD**
   ```bash
   # Ubuntu/Debian
   sudo apt-get install openocd
   
   # macOS
   brew install openocd
   ```

2. **连接开发板**

3. **执行烧写命令**
   ```bash
   openocd -f interface/stlink.cfg \
           -f target/stm32f1x.cfg \
           -c "program main.hex verify reset exit"
   ```

## 常见问题

### Q1: 无法识别开发板

**解决方案：**
- 检查USB连接是否牢固
- 安装/更新驱动程序
- 尝试更换USB端口或数据线

### Q2: 烧写失败

**解决方案：**
- 检查接线是否正确
- 确认开发板供电正常
- 检查固件文件路径是否正确
- 尝试擦除芯片后重新烧写

### Q3: 烧写后程序不运行

**解决方案：**
- 确认复位引脚连接正确
- 检查启动模式设置（BOOT引脚）
- 使用调试器检查程序是否正常启动

## 注意事项

1. 烧写前请备份原有固件
2. 确保供电电压正确，避免损坏开发板
3. 烧写过程中不要断开连接
4. 部分芯片有写保护，需先解除保护
